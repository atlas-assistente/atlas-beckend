<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Atlas • Dashboard</title>
  <link rel="stylesheet" href="/style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
  <!-- Login Screen -->
  <div id="loginScreen" class="screen active">
    <div class="login-container">
      <div class="login-box">
        <h1><i class="fas fa-globe"></i> Atlas</h1>
        <p class="subtitle">Sistema de Gestão Pessoal</p>
        
        <div class="input-group">
          <input type="email" id="loginEmail" placeholder="seu@email.com">
        </div>
        
        <button id="btnRequestCode" class="btn btn-primary">
          <i class="fas fa-paper-plane"></i> Enviar Código
        </button>
        
        <div id="codeSection" style="display: none; margin-top: 20px;">
          <div class="input-group">
            <input type="text" id="loginCode" placeholder="Código recebido">
          </div>
          <button id="btnLogin" class="btn btn-primary">
            <i class="fas fa-sign-in-alt"></i> Entrar
          </button>
        </div>
        
        <div id="loginMessage" class="message"></div>
        
        <div class="demo-note">
          <i class="fas fa-info-circle"></i> Para teste, use qualquer email.
        </div>
      </div>
    </div>
  </div>
  
  <!-- Main Dashboard -->
  <div id="dashboardScreen" class="screen">
    <!-- Top Bar -->
    <div class="topbar">
      <div class="logo">
        <i class="fas fa-globe"></i> Atlas
      </div>
      
      <div class="user-info">
        <span id="userEmail">usuário@email.com</span>
        <button id="btnLogout" class="btn btn-small">
          <i class="fas fa-sign-out-alt"></i> Sair
        </button>
      </div>
    </div>
    
    <div class="dashboard-container">
      <!-- Sidebar -->
      <div class="sidebar">
        <nav>
          <a href="#dashboard" class="nav-item active">
            <i class="fas fa-tachometer-alt"></i> Dashboard
          </a>
          <a href="#agenda" class="nav-item">
            <i class="fas fa-calendar"></i> Agenda
          </a>
          <a href="#financas" class="nav-item">
            <i class="fas fa-money-bill-wave"></i> Finanças
          </a>
          <a href="#whatsapp" class="nav-item">
            <i class="fab fa-whatsapp"></i> WhatsApp
          </a>
          <a href="#admin" class="nav-item">
            <i class="fas fa-user-cog"></i> Admin
          </a>
        </nav>
        
        <div class="sidebar-footer">
          <div class="status">
            <div class="status-label">API</div>
            <div class="status-value online" id="apiStatus">Online</div>
          </div>
        </div>
      </div>
      
      <!-- Main Content -->
      <div class="main-content">
        <!-- Dashboard View -->
        <div id="viewDashboard" class="view active">
          <div class="view-header">
            <h2><i class="fas fa-tachometer-alt"></i> Dashboard</h2>
            <div class="view-actions">
              <button id="btnRefresh" class="btn btn-small">
                <i class="fas fa-sync-alt"></i> Atualizar
              </button>
            </div>
          </div>
          
          <!-- Stats Cards -->
          <div class="stats-grid">
            <div class="stat-card">
              <div class="stat-icon">
                <i class="fas fa-calendar"></i>
              </div>
              <div class="stat-content">
                <div class="stat-value" id="totalEvents">0</div>
                <div class="stat-label">Eventos</div>
              </div>
            </div>
            
            <div class="stat-card">
              <div class="stat-icon">
                <i class="fas fa-money-bill-wave"></i>
              </div>
              <div class="stat-content">
                <div class="stat-value" id="totalIncome">R$ 0</div>
                <div class="stat-label">Receitas</div>
              </div>
            </div>
            
            <div class="stat-card">
              <div class="stat-icon">
                <i class="fas fa-credit-card"></i>
              </div>
              <div class="stat-content">
                <div class="stat-value" id="totalExpenses">R$ 0</div>
                <div class="stat-label">Despesas</div>
              </div>
            </div>
            
            <div class="stat-card">
              <div class="stat-icon">
                <i class="fas fa-comments"></i>
              </div>
              <div class="stat-content">
                <div class="stat-value" id="totalMessages">0</div>
                <div class="stat-label">Mensagens</div>
              </div>
            </div>
          </div>
          
          <!-- Content Grid -->
          <div class="content-grid">
            <!-- Agenda -->
            <div class="card">
              <div class="card-header">
                <h3><i class="fas fa-calendar-day"></i> Agenda de Hoje</h3>
                <button class="btn btn-small" id="btnAddEvent">
                  <i class="fas fa-plus"></i> Novo
                </button>
              </div>
              <div class="card-body">
                <div id="agendaList" class="list">
                  <!-- Eventos carregados via JS -->
                </div>
              </div>
            </div>
            
            <!-- Finanças -->
            <div class="card">
              <div class="card-header">
                <h3><i class="fas fa-chart-line"></i> Finanças Recentes</h3>
              </div>
              <div class="card-body">
                <div id="financeList" class="list">
                  <!-- Transações carregadas via JS -->
                </div>
              </div>
            </div>
            
            <!-- WhatsApp Simulator -->
            <div class="card full-width">
              <div class="card-header">
                <h3><i class="fab fa-whatsapp"></i> Simulador WhatsApp</h3>
              </div>
              <div class="card-body">
                <div class="chat-container">
                  <div class="chat-messages" id="chatMessages">
                    <div class="message bot">
                      <div class="message-text">
                        Envie uma mensagem como se fosse WhatsApp. Exemplos:
                        <div class="examples">
                          • "pagar aluguel 1500 dia 05"<br>
                          • "médico amanhã 14h"<br>
                          • "recebi 3200 salário"
                        </div>
                      </div>
                    </div>
                  </div>
                  
                  <div class="chat-input">
                    <input type="text" id="chatInput" placeholder="Digite sua mensagem...">
                    <button id="btnSendChat" class="btn btn-primary">
                      <i class="fas fa-paper-plane"></i>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Admin View -->
        <div id="viewAdmin" class="view">
          <div class="view-header">
            <h2><i class="fas fa-user-cog"></i> Painel Admin</h2>
            <div class="view-actions">
              <button id="btnRefreshUsers" class="btn btn-small">
                <i class="fas fa-sync-alt"></i> Atualizar
              </button>
              <button id="btnCreateUser" class="btn btn-primary">
                <i class="fas fa-user-plus"></i> Novo Usuário
              </button>
            </div>
          </div>
          
          <div class="admin-grid">
            <!-- Users List -->
            <div class="card">
              <div class="card-header">
                <h3><i class="fas fa-users"></i> Usuários</h3>
              </div>
              <div class="card-body">
                <div class="table-container">
                  <table id="usersTable">
                    <thead>
                      <tr>
                        <th>Email</th>
                        <th>Plano</th>
                        <th>Status</th>
                        <th>Ações</th>
                      </tr>
                    </thead>
                    <tbody id="usersTableBody">
                      <!-- Carregado via JS -->
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
            
            <!-- Create/Edit User -->
            <div class="card">
              <div class="card-header">
                <h3><i class="fas fa-edit"></i> Editar Usuário</h3>
              </div>
              <div class="card-body">
                <div class="form">
                  <div class="input-group">
                    <label>Email</label>
                    <input type="email" id="adminUserEmail" placeholder="email@exemplo.com">
                  </div>
                  
                  <div class="input-group">
                    <label>Nome</label>
                    <input type="text" id="adminUserName" placeholder="Nome do usuário">
                  </div>
                  
                  <div class="form-row">
                    <div class="input-group">
                      <label>Plano</label>
                      <select id="adminUserPlan">
                        <option value="FREE">FREE</option>
                        <option value="PRO">PRO</option>
                        <option value="PREMIUM">PREMIUM</option>
                      </select>
                    </div>
                    
                    <div class="input-group">
                      <label>Status</label>
                      <select id="adminUserStatus">
                        <option value="active">Ativo</option>
                        <option value="inactive">Inativo</option>
                        <option value="blocked">Bloqueado</option>
                      </select>
                    </div>
                  </div>
                  
                  <div class="input-group">
                    <label>Telefone (WhatsApp)</label>
                    <input type="text" id="adminUserPhone" placeholder="5511999999999">
                  </div>
                  
                  <div class="form-actions">
                    <button id="btnSaveUser" class="btn btn-primary">
                      <i class="fas fa-save"></i> Salvar
                    </button>
                    <button id="btnClearForm" class="btn btn-secondary">
                      <i class="fas fa-times"></i> Limpar
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Agenda View -->
        <div id="viewAgenda" class="view">
          <div class="view-header">
            <h2><i class="fas fa-calendar"></i> Agenda</h2>
            <button id="btnAddEvent2" class="btn btn-primary">
              <i class="fas fa-plus"></i> Novo Evento
            </button>
          </div>
          <div id="fullAgendaList" class="list-container">
            <!-- Agenda completa -->
          </div>
        </div>
        
        <!-- Finanças View -->
        <div id="viewFinancas" class="view">
          <div class="view-header">
            <h2><i class="fas fa-money-bill-wave"></i> Finanças</h2>
            <button id="btnAddTransaction" class="btn btn-primary">
              <i class="fas fa-plus"></i> Nova Transação
            </button>
          </div>
          <div id="fullFinanceList" class="list-container">
            <!-- Finanças completas -->
          </div>
        </div>
        
        <!-- WhatsApp View -->
        <div id="viewWhatsapp" class="view">
          <div class="view-header">
            <h2><i class="fab fa-whatsapp"></i> Simulador WhatsApp</h2>
          </div>
          <div class="whatsapp-full">
            <!-- Chat completo -->
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Modals -->
  <div id="modalEvent" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3><i class="fas fa-calendar-plus"></i> Novo Evento</h3>
        <button class="modal-close">&times;</button>
      </div>
      <div class="modal-body">
        <div class="input-group">
          <label>Título</label>
          <input type="text" id="eventTitle" placeholder="Ex: Reunião importante">
        </div>
        <div class="input-group">
          <label>Data</label>
          <input type="date" id="eventDate">
        </div>
        <div class="input-group">
          <label>Hora (opcional)</label>
          <input type="time" id="eventTime">
        </div>
        <div class="input-group">
          <label>Descrição</label>
          <textarea id="eventDescription" rows="3"></textarea>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary modal-close">Cancelar</button>
        <button id="btnSaveEvent" class="btn btn-primary">Salvar</button>
      </div>
    </div>
  </div>
  
  <div id="modalTransaction" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3><i class="fas fa-money-bill-wave"></i> Nova Transação</h3>
        <button class="modal-close">&times;</button>
      </div>
      <div class="modal-body">
        <div class="input-group">
          <label>Tipo</label>
          <div class="toggle-group">
            <button class="toggle-btn active" data-type="income">Receita</button>
            <button class="toggle-btn" data-type="expense">Despesa</button>
          </div>
        </div>
        <div class="input-group">
          <label>Descrição</label>
          <input type="text" id="transactionDesc" placeholder="Ex: Salário, Aluguel">
        </div>
        <div class="input-group">
          <label>Valor (R$)</label>
          <input type="number" id="transactionValue" step="0.01" placeholder="0,00">
        </div>
        <div class="input-group">
          <label>Data</label>
          <input type="date" id="transactionDate">
        </div>
        <div class="input-group">
          <label>Categoria</label>
          <select id="transactionCategory">
            <option value="renda">Renda</option>
            <option value="moradia">Moradia</option>
            <option value="alimentacao">Alimentação</option>
            <option value="transporte">Transporte</option>
            <option value="lazer">Lazer</option>
            <option value="outros">Outros</option>
          </select>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary modal-close">Cancelar</button>
        <button id="btnSaveTransaction" class="btn btn-primary">Salvar</button>
      </div>
    </div>
  </div>
  
  <script src="/app.js"></script>
</body>
</html>
